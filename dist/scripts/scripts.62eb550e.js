"use strict";angular.module("scorecardApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","chart.js"]).config(["$routeProvider",function(a){a.when("/",{redirectTo:"/reports/highlights"}).when("/reports/highlights",{templateUrl:"views/reports/highlights.html",controller:"ReportsHighlightsCtrl",resolve:{txtFile:function(){return{txtFileUrl:"data/highlights.txt"}}}}).when("/reports/legoscorecard",{templateUrl:"views/reports/scorecard.html",controller:"ReportsScorecardCtrl",resolve:{jsonFile:function(){return{jsonFileUrl:"data/lego_scorecard.json"}}}}).when("/reports/megabloksscorecard",{templateUrl:"views/reports/scorecard.html",controller:"ReportsScorecardCtrl",resolve:{jsonFile:function(){return{jsonFileUrl:"data/megabloks_scorecard.json"}}}}).when("/reports/legosummary",{templateUrl:"views/reports/summary.html",controller:"ReportsSummaryCtrl",resolve:{jsonFile:function(){return{jsonFileUrl:"data/lego_summary.json"}}}}).when("/reports/megablokssummary",{templateUrl:"views/reports/summary.html",controller:"ReportsSummaryCtrl",resolve:{jsonFile:function(){return{jsonFileUrl:"data/megabloks_summary.json"}}}}).when("/guide",{templateUrl:"views/guide.html",controller:"GuideCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("scorecardApp").controller("GuideCtrl",["$scope",function(a){a.guideObject=[]}]),angular.module("scorecardApp").controller("ReportsHighlightsCtrl",["$scope","$http","txtFile",function(a,b,c){b.get(c.txtFileUrl).success(function(b){a.highlightsTxt=b.split("\n")})}]),angular.module("scorecardApp").controller("ReportsScorecardCtrl",["$scope","$http","jsonFile",function(a,b,c){b.get(c.jsonFileUrl).success(function(b){function c(a,b){var c="0"+a;return c.substr(c.length-b)}function d(a){var b=[];b.labels=[],b.data=[];for(var d=0;e>d;d++)b.labels[d]=c(a[d][0][1],2),b.data[d]=a[d][1];return b.labels.reverse(),b.data.reverse(),b}a.table=b,a.showScores=!0,a.subsets=function(){for(var a=0,c=b.superSubsets.length,d=0;c>d;d++)for(var e=b.superSubsets[d].subsets.length,f=0;e>f;f++)a++;return a}(),a.superSubsets=function(){for(var a=1,c=b.superSubsets.length,d=0;c>d;d++)a++;return a}(),a.decimal_rounding=function(a,b){b||(b=2);var c=parseFloat(a).toFixed(b);return c};for(var e=6,f=a.table.superSubsets.length,g=0;f>g;g++)for(var h=a.table.superSubsets[g].subsets.length,i=0;h>i;i++)a.table.superSubsets[g].subsets[i].chartData=d(a.table.superSubsets[g].subsets[i].trend)})}]).controller("sparkLineCtrl",["$scope","$timeout",function(a){var b=a.$parent.subset.chartData;a.labels=b.labels,a.data=[],a.data[0]=b.data,Chart.defaults.global.colours[0].strokeColor="rgb(0, 191, 255)"}]).controller("boozBallCtrl",["$scope","$timeout",function(a){var b=100*a.$parent.subset.doc_percentage.toFixed(4),c=100-b;a.data=[b,c],a.labels=["This Subset","Other Subsets"]}]).directive("scrollPaneHeaders",[function(){function a(a,b){function c(){d=b[0].scrollTop,e=b[0].scrollLeft,f=b[0].clientHeight,g=b[0].clientWidth,h=b[0].scrollHeight,i=b[0].scrollWidth,j=h-f-d,k=i-g-e,document.getElementById("scorecard-grid-header").style.top=d+"px",document.getElementById("table-title").style.left=e+"px",document.getElementById("scorecard-grid-sidebar").style.left=e+"px",document.getElementById("scroll-shadow-top").style.display=0===d?"none":"block",document.getElementById("scroll-shadow-left").style.display=0===e?"none":"block",document.getElementById("scroll-shadow-bottom").style.display=0===j?"none":"block",document.getElementById("scroll-shadow-right").style.display=0===k?"none":"block"}var d,e,f,g,h,i,j,k;b[0].addEventListener("scroll",c)}return{restrict:"A",link:a}}]),angular.module("scorecardApp").controller("ReportsSummaryCtrl",["$scope","$http","jsonFile",function(a,b,c){b.get(c.jsonFileUrl).success(function(b){a.table=b;for(var c=0;c<b["Consumer Segment"].length;c++){for(var d=b["Consumer Segment"][c],e=[],f=[],g=0;g<d.row_data.length;g++)f[g]=d.row_data[g].index;f.sort(function(a,b){return a-b});for(var h=0;h<f.length;h++)for(var i=0;i<d.row_data.length;i++)d.row_data[i].rank===f[h]&&(e[h]=d.row_data[i]);b["Consumer Segment"][c].row_data=e}a.current_segment=b["Consumer Segment"][0]})}]);